"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.transformBlock = exports.transformScopeBlock = exports.transformBlockOrStatement = void 0;
const ts = require("typescript");
const lua = require("../../LuaAST");
const scope_1 = require("../utils/scope");
function transformBlockOrStatement(context, statement) {
    return context.transformStatements(ts.isBlock(statement) ? statement.statements : statement);
}
exports.transformBlockOrStatement = transformBlockOrStatement;
function transformScopeBlock(context, node, scopeType) {
    scope_1.pushScope(context, scopeType);
    const statements = scope_1.performHoisting(context, context.transformStatements(node.statements));
    const scope = scope_1.popScope(context);
    return [lua.createBlock(statements, node), scope];
}
exports.transformScopeBlock = transformScopeBlock;
exports.transformBlock = (node, context) => {
    scope_1.pushScope(context, scope_1.ScopeType.Block);
    const statements = scope_1.performHoisting(context, context.transformStatements(node.statements));
    scope_1.popScope(context);
    return lua.createDoStatement(statements, node);
};
//# sourceMappingURL=block.js.map